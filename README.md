# NaimBot

**NaimBot** — это современный Telegram-бот для поиска подработок, с системой модерации пользователей, реферальной программой, заявками на вывод средств и удобной админ-панелью.

## Возможности бота

- **Регистрация и модерация пользователей**: каждый новый пользователь проходит регистрацию с подтверждением возраста и отправкой фото паспорта. После модерации получает доступ к заданиям.
- **Профиль пользователя**: просмотр баланса, истории операций, заявок на вывод, редактирование данных.
- **Задания (подработки)**: просмотр доступных заданий, отклик на задания, отображение информации о количестве мест и времени.
- **Реферальная программа**: приглашайте друзей, получайте бонусы за их активность.
- **Заявки на вывод средств**: оформление заявки на вывод, отслеживание статуса, уведомления о решении администратора.
- **Inline-клавиатуры**: весь интерфейс построен на кнопках, никаких текстовых команд.
- **Админ-панель**: модерация новых пользователей, управление балансом, просмотр и одобрение/отклонение заявок на вывод, создание и контроль заданий, рассылка новостей.
- **Безопасность**: права доступа реализованы через middleware, блокировка и разблокировка пользователей.

## Быстрый старт

1. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```
2. Заполните файл `.env` (пример):
   ```
   BOT_TOKEN=ваш_токен_бота
   ADMIN_IDS=[123456789,987654321]
   WORKERS_CHAT_ID=-1001234567890
   WORKERS_CHAT_LINK=https://t.me/your_group_link
   ```
   - **BOT_TOKEN** — токен, который вы получили у [@BotFather](https://t.me/BotFather).
   - **ADMIN_IDS** — список Telegram ID админов (через запятую, в квадратных скобках).
   - **WORKERS_CHAT_ID** — ID группы/канала для рабочих (начинается с -100...).
   - **WORKERS_CHAT_LINK** — ссылка-приглашение в рабочий чат.

3. Запустите бота:
   ```
   python bot.py
   ```

## Структура проекта

- `bot.py` — точка входа, инициализация бота, диспетчера, подключение роутеров и middleware.
- `bd_script.py` — скрипт для создания таблиц в базе данных.
- `naimbot.db` — файл SQLite-базы данных (создаётся автоматически).

### Каталоги:
- `core/`
  - `config.py` — загрузка настроек из .env
  - `db.py` — подключение к базе данных, создание сессий
- `models/`
  - `base.py` — базовый класс для моделей SQLAlchemy
  - `user.py` — модель пользователя (регистрация, баланс, статус, рефералы)
  - `job.py` — модель задания (описание, время, оплата, участники)
  - `referral.py` — модель реферальной системы
- `services/`
  - `user_service.py` — функции для работы с пользователями
  - `job_service.py` — функции для работы с заданиями
  - `referral_service.py` — функции для работы с рефералами
- `handlers/`
  - `user/`
    - `start.py` — регистрация, стартовое меню
    - `profile.py` — профиль, баланс, вывод средств
    - `jobs.py` — просмотр и отклик на задания
    - `referral.py` — реферальная программа
  - `admin/`
    - `moderation.py` — модерация новых пользователей
    - `users.py` — управление пользователями, балансом, заявками на вывод
    - `jobs.py` — создание и контроль заданий
- `keyboards/`
  - `user.py` — inline-клавиатуры для пользователей
  - `admin.py` — inline-клавиатуры для админов
- `middlewares/`
  - `access.py` — middleware для проверки прав доступа (админ/пользователь/блокировка)
- `utils/`
  - `misc.py` — вспомогательные функции

## Важно
- Все основные параметры настраиваются через `.env`.
- Для корректной работы с группой бот должен быть админом в чате.
- После изменения моделей БД пересоздайте таблицы или используйте миграции.

## Зависимости
- aiogram 3.x
- SQLAlchemy 2.x
- pydantic
- aiosqlite

---

**NaimBot** — удобный инструмент для поиска подработок, автоматизации выплат и управления пользователями через Telegram. 